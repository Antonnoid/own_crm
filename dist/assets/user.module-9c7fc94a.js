import{v as r,x as n,m as l}from"./index-602ec296.js";import{a as i}from"./auth-header-ad4d04ca.js";const c="https://crm.web-hands.ru/api/v1";class d{getMe(){return r.get(c+"/user/",{headers:i()})}getPlaces(){return r.get(c+"/place/list/",{headers:i()})}getPlacesChild(e){return r.get(c+"/places/?code="+e,{headers:i()})}getPlacesSubChild(e,a){return r.get(c+"/place/fields/?place="+e+"&id="+a,{headers:i()})}addNewPlaceChild(e){return r.post(c+"/place/save/",e,{headers:i()})}getOptionData(e,a,s){return r.get(c+"/options/list/?prop="+e+"&id="+a+"&entity="+s,{headers:i()})}}const o=new d,u=n("user",{state:()=>({places:[],regions:[],districts:[],vicinities:[],localities:[],highways:[],place:[],metro:[],metro_line:[],placesSubChild:[],optionData:[]}),actions:{async getPlacesList(){try{const t=await o.getPlaces();return this.places=t.data.data,t}catch(t){return Promise.reject(t)}},async getPlacesChild(t){try{const e=await o.getPlacesChild(t);return t==="regions"?this.regions=e.data.data:t==="districts"?this.districts=e.data.data:t==="vicinity"?this.vicinities=e.data.data:t==="localities"?this.localities=e.data.data:t==="highway"?this.highways=e.data.data:t==="place"?this.place=e.data.data:t==="metro"?this.metro=e.data.data:t==="metro_line"&&(this.metro_line=e.data.data),e}catch(e){return Promise.reject(e)}},async addNewPlaceChild(t){try{const e=await o.addNewPlaceChild(t);e.status===200?l.success("Успешно изменено"):(console.error("Error fetching data:",e.statusText),l.error("Ошибка"))}catch(e){console.error("Error fetching data:",e)}},async getPlacesSubChild(t,e){try{const a=await o.getPlacesSubChild(t,e);return this.placesSubChild=a.data.data,a}catch(a){return Promise.reject(a)}},async getOptionsData(t,e,a){try{const s=await o.getOptionData(t,e,a);return this.optionData=s.data.data,console.log("reeeee",this.optionData),s}catch(s){return Promise.reject(s)}}}});export{u};
