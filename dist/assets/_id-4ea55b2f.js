import{u as A}from"./index-f83c9f04.js";import{b as _,c as E,d as n,r as C,u as G,h as U,o as B,a as r,t as y,i as f,f as v,w as s,j as O,F as z,e as D,k as l,g as h}from"./index-0bc94454.js";function S(F,u){return _(),E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[n("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z","clip-rule":"evenodd"})])}const V={class:"leads single places",id:"app"},j={class:"filter"},L={class:"filter__task --w-refresh hidden-desktop"},$=n("div",{class:"filter__task-t"},[n("p",{class:"filter__text"},"Фильтр")],-1),H={class:"filter__refresh"},q={class:"single__main"},J={class:"single__main-slider --info show-flex"},K={class:"single__form"},X={__name:"_id",setup(F){const u=C([]),i=A(),d=G(),c=C(!1),o=U({type:"new",data:{NAME:"",PROPERTY_REGION_TYPE:""},place:d.params.id}),P=t=>{console.log("Success:",t)},w=t=>{console.log("Failed:",t)},T=()=>{c.value=!0},g=async t=>{console.log(t),c.value=!1,console.log(o),await i.addNewPlaceChild(o),await i.fetchPlacesChild(d.params.id),u.value=i.placesChild},Y=async(t,a)=>{a.preventDefault(),console.log(t);const p={type:"delete",id:t.id,place:d.params.id,data:{NAME:t.value,PROPERTY_REGION_TYPE:""}};await i.addNewPlaceChild(p),await i.fetchPlacesChild(d.params.id),u.value=i.placesChild};B(()=>{b()});const b=async()=>{try{await i.fetchPlacesChild(d.params.id),u.value=i.placesChild}catch(t){console.error("Error fetching data in component:",t)}};return(t,a)=>{const p=r("a-input"),m=r("a-form-item"),k=r("a-select-option"),M=r("a-select"),R=r("a-form"),N=r("a-modal"),x=r("router-link");return _(),E("div",null,[n("main",V,[n("div",j,[n("div",L,[$,n("div",H,[n("div",{onClick:a[0]||(a[0]=e=>t.clearFilter()),class:"filter__refresh-btn"}," Сбросить "),n("div",{onClick:T,class:"filter__refresh-btn"}," Добавить "+y(f(d).params.id),1),f(d).params.id==="regions"?(_(),v(N,{key:0,open:c.value,"onUpdate:open":a[3]||(a[3]=e=>c.value=e),title:"Добавить новый регион",onOk:g},{default:s(()=>[l(R,{model:o,name:"basic",autocomplete:"off",onFinish:P,onFinishFailed:w},{default:s(()=>[l(m,{label:"Регион",name:"Регион"},{default:s(()=>[l(p,{value:o.data.NAME,"onUpdate:value":a[1]||(a[1]=e=>o.data.NAME=e)},null,8,["value"])]),_:1}),l(m,{label:"Тип",name:"Тип"},{default:s(()=>[l(M,{value:o.data.PROPERTY_REGION_TYPE,"onUpdate:value":a[2]||(a[2]=e=>o.data.PROPERTY_REGION_TYPE=e)},{default:s(()=>[l(k,{value:"3479"},{default:s(()=>[h("Область")]),_:1}),l(k,{value:"3478"},{default:s(()=>[h("Город")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])):O("",!0),f(d).params.id==="vicinity"?(_(),v(N,{key:1,open:c.value,"onUpdate:open":a[6]||(a[6]=e=>c.value=e),title:"Добавить округ",onOk:g},{default:s(()=>[l(R,{model:o,name:"basic",autocomplete:"off",onFinish:P,onFinishFailed:w},{default:s(()=>[l(m,{label:"Округ",name:"Округ"},{default:s(()=>[l(p,{value:o.data.NAME,"onUpdate:value":a[4]||(a[4]=e=>o.data.NAME=e)},null,8,["value"])]),_:1}),l(m,{label:"Регион",name:"Регион"},{default:s(()=>[l(p,{value:o.data.PROPERTY_REGION_TYPE,"onUpdate:value":a[5]||(a[5]=e=>o.data.PROPERTY_REGION_TYPE=e)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])):O("",!0)])])]),n("div",q,[n("div",J,[n("div",K,[(_(!0),E(z,null,D(u.value,e=>(_(),v(x,{to:"/places/"+t.$route.params.id+"/"+e.id,style:{"margin-left":"10px"},class:"single__item places__item flex justify-between",key:e.id},{default:s(()=>[h(y(e.value)+" ",1),l(f(S),{onClick:I=>Y(e,I),class:"w-10 h-10"},null,8,["onClick"])]),_:2},1032,["to"]))),128))])])])])])}}};export{X as default};
