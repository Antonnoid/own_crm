import{u as T}from"./user.module-a271f777.js";import{r,u as I,l as R,o as L,s as Y,a as p,b as t,d as u,e as l,t as q,k as _,F as E,g as P,h as m,w as c,f as h,i as G}from"./index-c35605e9.js";import"./auth-header-ad4d04ca.js";const M={class:"cn"},j={id:"app"},A={class:"single__main"},$={class:""},z={key:0,class:"single__title"},H={key:1,class:"flex gap-8"},X={__name:"_id",setup(J){const n=r([]),o=T(),i=I(),N=r(),g=r([]),O=R({data:[],value:[],fetching:!1}),V=async(s,d,v)=>{await o.getOptionsData(s,d,v),g.value=o.optionData},y=R({type:"edit",data:{NAME:"",PROPERTY_REGION_TYPE:""},id:i.params.id,place:i.path.split("/")[2]});L(()=>{B()}),Y(N,()=>{});const B=async()=>{try{await o.getPlacesSubChild(i.path.split("/")[2],i.params.id),n.value=o.placesSubChild}catch(s){console.error("Error fetching data in component:",s)}},C=(s,d)=>d.value.toLowerCase().indexOf(s.toLowerCase())>=0,k=s=>{y.data.PROPERTY_REGION_TYPE=s},b=()=>{},S=()=>{},U=async()=>{await o.addNewPlaceChild(y),await o.fetchPlacesSubChild(i.params.id),n.value=o.placesSubChild};return r(void 0),(s,d)=>{const v=p("a-input"),f=p("a-form-item"),x=p("a-select"),F=p("a-select-option");return t(),u("div",M,[l("main",j,[l("div",{class:"filter"},[l("div",{class:"filter__task --w-refresh hidden-desktop"},[l("div",{class:"filter__refresh"},[l("div",{onClick:U,class:"filter__refresh-btn"}," Обновить ")])])]),l("div",A,[l("div",$,[n.value&&n.value[0]?(t(),u("div",z,[l("span",null,q(n.value[0].title),1)])):_("",!0),n.value&&n.value[0]?(t(),u("div",H,[(t(!0),u(E,null,P(n.value[0].fields,e=>(t(),u("div",{key:e.id},[e.type==="text"?(t(),m(f,{key:0,label:e.name,name:e.name,rules:[{required:e.required,message:"Required"}]},{default:c(()=>[h(v,{value:e.value,"onUpdate:value":a=>e.value=a,ref_for:!0,ref:e.code,type:e.html,onChange:s.onChangeInput,class:"!w-[200px]"},null,8,["value","onUpdate:value","type","onChange"])]),_:2},1032,["label","name","rules"])):_("",!0),e.type=="select"&&e.mode=="static"&&e.options!==null?(t(),m(f,{key:1,label:e.name,name:e.name,rules:[{required:e.required,message:"Required"}]},{default:c(()=>[h(x,{value:e.options.find(a=>a.checked===!1).value,"onUpdate:value":a=>e.options.find(D=>D.checked===!1).value=a,"show-search":"",options:e.options,"filter-option":C,onFocus:S,onBlur:b,onChange:k,class:"!w-[200px]"},null,8,["value","onUpdate:value","options"])]),_:2},1032,["label","name","rules"])):e.type=="select"&&e.mode=="ajax"?(t(),m(f,{key:2,label:e.name,name:e.name,rules:[{required:e.required,message:"Required"}]},{default:c(()=>[h(x,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,"show-search":"","filter-option":C,onFocus:a=>V(e.code,e.id,"place"),onBlur:b,onChange:k,class:"!w-[200px]","not-found-content":O.fetching?void 0:null},{default:c(()=>[(t(!0),u(E,null,P(g.value,a=>(t(),m(F,{key:a.id,value:a.value},{default:c(()=>[G(q(a.value),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onFocus","not-found-content"])]),_:2},1032,["label","name","rules"])):_("",!0)]))),128))])):_("",!0)])])])])}}};export{X as default};
