import{u as I}from"./user.module-e87b7e4c.js";import{r as d,u as L,l as E,o as Y,q as G,a as r,b as l,d as u,e as n,i as P,t as f,k as p,F as N,g as O,h as _,w as i,f as h}from"./index-dc8ff5dc.js";import"./auth-header-ad4d04ca.js";const M={class:"cn"},$={id:"app"},j={class:"single__main"},A={class:""},z={key:0,class:"single__title"},H={key:1,class:"flex gap-8"},X={__name:"_id",setup(J){const t=d([]),o=I(),c=L(),g=d(),y=d([]),C=E({data:[],value:[],fetching:!1}),V=async s=>{await o.getOptionsData(s),y.value=o.optionData,console.log("focus",C.data)},m=E({type:"edit",data:{NAME:"",PROPERTY_REGION_TYPE:""},id:c.params.id,place:c.path.split("/")[2]});Y(()=>{B()}),G(g,()=>{console.log("sss",g.value)});const B=async()=>{try{await o.getPlacesSubChild(c.path.split("/")[2],c.params.id),t.value=o.placesSubChild,console.log("res",t.value)}catch(s){console.error("Error fetching data in component:",s)}},k=(s,q)=>q.value.toLowerCase().indexOf(s.toLowerCase())>=0,b=s=>{console.log(`selected ${s}`),m.data.PROPERTY_REGION_TYPE=s,console.log(m)},x=()=>{console.log("blur")},S=()=>{console.log("focus")},U=async()=>{await o.addNewPlaceChild(m),await o.fetchPlacesSubChild(c.params.id),t.value=o.placesSubChild};return d(void 0),(s,q)=>{const F=r("a-input"),v=r("a-form-item"),R=r("a-select"),D=r("a-select-option");return l(),u("div",M,[n("main",$,[n("div",{class:"filter"},[n("div",{class:"filter__task --w-refresh hidden-desktop"},[n("div",{class:"filter__refresh"},[n("div",{onClick:U,class:"filter__refresh-btn"}," Обновить ")])])]),P(" "+f(t.value)+" ",1),n("div",j,[n("div",A,[t.value&&t.value[0]?(l(),u("div",z,[n("span",null,f(t.value[0].title),1)])):p("",!0),t.value&&t.value[0]?(l(),u("div",H,[(l(!0),u(N,null,O(t.value[0].fields,e=>(l(),u("div",{key:e.id},[e.type==="text"?(l(),_(v,{key:0,label:e.name,name:e.name,rules:[{required:e.required,message:"Required"}]},{default:i(()=>[h(F,{value:e.value,"onUpdate:value":a=>e.value=a,ref_for:!0,ref:e.code,type:e.html,onChange:s.onChangeInput,class:"!w-[200px]"},null,8,["value","onUpdate:value","type","onChange"])]),_:2},1032,["label","name","rules"])):p("",!0),e.type=="select"&&e.mode=="static"&&e.options!==null?(l(),_(v,{key:1,label:e.name,name:e.name,rules:[{required:e.required,message:"Required"}]},{default:i(()=>[h(R,{value:e.options.find(a=>a.checked===!1).value,"onUpdate:value":a=>e.options.find(T=>T.checked===!1).value=a,"show-search":"",options:e.options,"filter-option":k,onFocus:S,onBlur:x,onChange:b,class:"!w-[200px]"},null,8,["value","onUpdate:value","options"])]),_:2},1032,["label","name","rules"])):e.type=="select"&&e.mode=="ajax"?(l(),_(v,{key:2,label:e.name,name:e.name,rules:[{required:e.required,message:"Required"}]},{default:i(()=>[h(R,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,"show-search":"","filter-option":k,onFocus:a=>V(e.code),onBlur:x,onChange:b,class:"!w-[200px]","not-found-content":C.fetching?void 0:null},{default:i(()=>[(l(!0),u(N,null,O(y.value,a=>(l(),_(D,{key:a.id,value:a.value},{default:i(()=>[P(f(a.value),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onFocus","not-found-content"])]),_:2},1032,["label","name","rules"])):p("",!0)]))),128))])):p("",!0)])])])])}}};export{X as default};
